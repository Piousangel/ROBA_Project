<html>
    <head>
        <title>제목</title>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="/static/css/layout.css" type="text/css">
        <!-- <link type="text/css" rel="stylesheet" href="../css/design.css"/> css파일
        불러올때 -->
        <style>
            #left_img {
                background-image: url("/static/imgs/ROBA_2-1_newBG.png");
                background-size: 630px 460px;
                background-repeat: no-repeat;
                width: 630px;
                height: 460px;
            }
            #choice_bean {
                top: 116px;
                left: 158px;
            }
            #sorting {
                top: 227px;
                left: 275px;
            }
            .sweet {
                width: 168px;
                height: 99px;
                top: 277px;
                left: 45px;
            }
            .bodygam {
                width: 200px;
                height: 99px;
                top: 277px;
                left: 215px;
            }
            .sanme {
                width: 160px;
                height: 99px;
                top: 277px;
                left: 420px;
            }
            .img_relative {
                top: 0;
                left: 0;
            }
            .lostaric {
                top: 473px;
                left: 62px;
                width: 470px;
            }
            .terarosa {
                top: 663px;
                left: 62px;
                width: 420px;
            }
            .indonasia {
                top: 852px;
                left: 62px;
                width: 360px;
            }
            #arrow {
                top: 43px;
                left: 651px;
            }
            #line {
                top: 420px;
                left: 626px;
            }
            #amekor {
                top: 115px;
                left: 1128px;
            }
            #americano {
                top: 179px;
                left: 1160px;
            }
            .order {
                top: 881px;
                left: 1097px;
            }
            #lostaric_2 {
                top: 390px;
                left: 680px;
            }
            #terarosa_2 {
                top: 390px;
                left: 1150px;
            }
            #indonasia_2 {
                top: 390px;
                left: 1540px;
            }
            #losta_cup {
                top: 475px;
                left: 838px;
            }
            #tera_cup {
                top: 475px;
                left: 1224px;
            }
            #indo_cup {
                top: 475px;
                left: 1610px;
            }
            .los_background {
                background-image: url("/static/imgs/ROBA_2-1_ratioBG.png");
                background-repeat: no-repeat;
                width: 330px;
                height: 99px;
                top: 712px;
                left: 728px;
            }
            .los_arrow {
                top: 39px;
                left: 39px;
            }
            .tera_background {
                background-image: url("/static/imgs/ROBA_2-1_ratioBG.png");
                background-repeat: no-repeat;
                width: 330px;
                height: 99px;
                top: 712px;
                left: 1114px;
            }
            .tera_arrow {
                top: 39px;
                left: 39px;
            }

            #remain_div {
                top: 275px;
                left: 1482px;
            }

            #remain_font {
                top: 33px;
                left: 40px;
                
                width: 150px;
            }

            #remain_ratio {
                top: 33px;
                left: 180px;
                text-align: right;
                width: 100px;
            }
            .indo_background {
                background-image: url("/static/imgs/ROBA_2-1_ratioBG.png");
                background-repeat: no-repeat;
                width: 330px;
                height: 99px;
                top: 712px;
                left: 1500px;
            }
            .indo_arrow {
                top: 39px;
                left: 39px;
            }
            .percent {
                text-align: right;
                width: 152px;
            }
            .los_percent {
                top: 14px;
                left: 90px;
            }
            .tera_percent {
                top: 14px;
                left: 90px;
            }
            .indo_percent {
                top: 14px;
                left: 90px;
            }
            #losdown {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 39px;
            }
            #losup {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 254px;
            }
            #teradown {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 39px;
            }
            #teraup {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 254px;
            }
            #indodown {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 39px;
            }
            #indoup {
                width: 30px;
                height: 30px;
                top: 39px;
                left: 254px;
            }

            

        </style>
    </head>
    <body
        onload="init();"
        oncontextmenu='return false'
        onselectstart='return false'
        ondragstart='return false'>
        <div id="wrap">
            <div id="left_img">
                <p id="choice_bean" class="font_50">원두 종류 선택</p>
                <p id="sorting" class="font_40_red">정렬</p>
                <div class="sweet" id="radio_sweet">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_sweet_selected.png"
                        class="img_relative"
                        name="img_sweet_selected">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_sweet_unselected.png"
                        class="img_relative"
                        name="img_sweet_unselected">
                </div>
                <div class="bodygam" id="radio_bodygam">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_body_selected.png"
                        class="img_relative"
                        name="img_bodygam_selected">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_body_unselected.png"
                        class="img_relative"
                        name="img_bodygam_unselected">
                </div>
                <div class="sanme" id="radio_sanme">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_sour_selected.png"
                        class="img_relative"
                        name="img_sanme_selected">
                    <img
                        hidden="hidden"
                        src="/static/imgs/ROBA_2-1_sour_unselected.png"
                        class="img_relative"
                        name="img_sanme_unselected">
                </div>
            </div>
            <div class="lostaric_1">
                <img src="/static/imgs/lostaric_img.png" alt="logo" class="coffee lostaric"/>
            </div>
            <div>
                <img src="/static/imgs/terasosa_img.png" alt="logo" class="coffee terarosa"/>
            </div>
            <div>
                <img src="/static/imgs/indonisia_img.png" alt="logo" class="coffee indonasia"/>
            </div>
            <img
                src="/static/imgs/ROBA_23_backArrow.png"
                alt="logo"
                id="arrow"
                onclick="goBack()"/>
            <img src="/static/imgs/ROBA_2-1_bgLine.png" alt="logo" id="line"/>
            <p id="amekor" class="font_60">아메리카노</p>
            <p id="americano" class="font_40">Americano</p>

            <div id="remain_div">
                <img src="/static/imgs/ROBA_2-1_ratioBG.png" id="_ratio" alt="alt">
                <p id="remain_font" class="font_30_red" name="remain_font">남은 비율:</p>
                <p id="remain_ratio" class="font_30_red" name="remain_ratio">100%</p>
                <!--임의로 넣었습니다.-->
            </div>

            <p id="lostaric_2" class="font_40">로스터릭 코스타리카 허니</p>
            <p id="terarosa_2" class="font_40">테라로사 에티오피아</p>
            <p id="indonasia_2" class="font_40">인도네시아 만델링</p>
            <img
                src="/static/imgs/ROBA_2-1_beaker_filled_lightBrown.png"
                alt="logo2"
                id="losta_cup"/>
            <img
                src="/static/imgs/ROBA_2-1_beaker_filled_brown.png"
                alt="logo"
                id="tera_cup"/>
            <img src="/static/imgs/ROBA_2-1_beaker_3.png" alt="logo" id="indo_cup"/>

            <div class="los_background">
                <img src="/static/imgs/ROBA_2-1_ratioBtn.png" alt="logo" class="los_arrow"/>
                <p class="percent los_percent font_60" id="los_per">{{blender_1}}%</p>
                <p class="z-top" id="losdown" name="lostaric_percentdown"></p>
                <p class="z-top" id="losup" name="lostaric_percentup"></p>
            </div>
            <div class="tera_background">
                <img src="/static/imgs/ROBA_2-1_ratioBtn.png" alt="logo" class="tera_arrow"/>
                <p class="percent tera_percent  font_60" id="tera_per">{{blender_2}}%</p>
                <p class="z-top" id="teradown" name="tera_percentdown"></p>
                <p class="z-top" id="teraup" name="tera_percentup"></p>
            </div>
            <div class="indo_background">
                <img src="/static/imgs/ROBA_2-1_ratioBtn.png" alt="logo" class="indo_arrow"/>
                <p class="percent indo_percent  font_60" id="indo_per">{{blender_3}}%</p>
                <p class="z-top" id="indodown" name="indo_percentdown"></p>
                <p class="z-top" id="indoup" name="indo_percentup"></p>
            </div>
        </div>

        <img hidden class="order" name="img_not_yet" src="/static/imgs/ROBA_2-2_선택완료_notyet.png">
        <img hidden class="order z-top" name="img_yet" src="/static/imgs/ROBA_2_button.png" onclick="orderform()">  
        

    </div>
    <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
        var sweet = [window.document.img_sweet_unselected, window.document.img_sweet_selected];
        var bodygam = [window.document.img_bodygam_unselected, window.document.img_bodygam_selected];
        var sanme = [window.document.img_sanme_unselected, window.document.img_sanme_selected];

        var losvalue =  parseInt(document.getElementById("los_per").innerText);
        var teravalue = parseInt(document.getElementById("tera_per").innerText);
        var indovalue = parseInt(document.getElementById("indo_per").innerText);
        var remain_ratio = 100 - losvalue - teravalue - indovalue;
        
        var btn = [window.document.img_not_yet, window.document.img_yet]

        var val = 10;
        function init() {
            img_hide(sweet);
            img_hide(bodygam);
            img_hide(sanme);
            img_hide(btn);

            sweet[0].hidden = false;
            bodygam[1].hidden = false;
            sanme[0].hidden = false;

            btn[0].hidden = false;
            
            document
                .getElementById("radio_sweet")
                .addEventListener("mouseup", function () {
                    mouse_up(0)
                })
            document
                .getElementById("radio_bodygam")
                .addEventListener("mouseup", function () {
                    mouse_up(1)
                })
            document
                .getElementById("radio_sanme")
                .addEventListener("mouseup", function () {
                    mouse_up(2)
                })

            document
                .getElementById("losdown")
                .addEventListener("mouseup", function () {
                    ratio_down(0)
                })
            document
                .getElementById("losup")
                .addEventListener("mouseup", function () {
                    ratio_up(0)
                })
            document
                .getElementById("teradown")
                .addEventListener("mouseup", function () {
                    ratio_down(1)
                })
            document
                .getElementById("teraup")
                .addEventListener("mouseup", function () {
                    ratio_up(1)
                })
            document
                .getElementById("indodown")
                .addEventListener("mouseup", function () {
                    ratio_down(2)
                })
            document
                .getElementById("indoup")
                .addEventListener("mouseup", function () {
                    ratio_up(2)
                })

            document
                .getElementById("remain_ratio")
                .innerText = remain_ratio.toString() + "%";

            if(remain_ratio == 0){
                img_hide(btn);
                btn[1].hidden = false;
            }
        }

        function ratio_down(value) {
            if (value == 0) {
                if (losvalue != 0) {
                    losvalue -= 10;
                    remain_ratio += 10;
                }
            } else if (value == 1) {
                if (teravalue != 0) {
                    teravalue -= 10;
                    remain_ratio += 10;
                }
            } else if (value == 2) {
                if (indovalue != 0) {
                    indovalue -= 10;
                    remain_ratio += 10;
                }
            }

            if(remain_ratio != 0){
                img_hide(btn);
                btn[0].hidden = false;
            }
            document
                .getElementById("los_per")
                .innerText = losvalue.toString() + "%";
            document
                .getElementById("tera_per")
                .innerText = teravalue.toString() + "%";
            document
                .getElementById("indo_per")
                .innerText = indovalue.toString() + "%";
            document
                .getElementById("remain_ratio")
                .innerText = remain_ratio.toString() + "%";
        }

        function ratio_up(value) {
            if (remain_ratio !=0) {
                if (value == 0) {
                    if (losvalue != 100) {
                        losvalue += 10;
                        remain_ratio -= 10;
                    }
                } else if (value == 1) {
                    if (teravalue != 100) {
                        teravalue += 10;
                        remain_ratio -= 10;
                    }
                } else if (value == 2) {
                    if (indovalue != 100) {
                        indovalue += 10;
                        remain_ratio -= 10;
                    }
                }
            }

            if(remain_ratio == 0){
                img_hide(btn);
                btn[1].hidden = false;
            }
            document
                .getElementById("los_per")
                .innerText = losvalue.toString() + "%";
            document
                .getElementById("tera_per")
                .innerText = teravalue.toString() + "%";
            document
                .getElementById("indo_per")
                .innerText = indovalue.toString() + "%";
                
            document
                .getElementById("remain_ratio")
                .innerText = remain_ratio.toString() + "%";
        }

        function img_hide(array) {
            for (var i = 0; i < array.length; i++) {
                array[i].hidden = true;
            }
        }

        function mouse_up(value) {
            img_hide(sweet);
            img_hide(bodygam);
            img_hide(sanme);
            if (value == 0) {
                sweet[1].hidden = false;
                bodygam[0].hidden = false;
                sanme[0].hidden = false;
            } else if (value == 1) {
                sweet[0].hidden = false;
                bodygam[1].hidden = false;
                sanme[0].hidden = false;
            } else {
                sweet[0].hidden = false;
                bodygam[0].hidden = false;
                sanme[1].hidden = false;
            }
        }
        function goBack() {
            sendGet("/Main");
        }
        function sendGet(action) {
            var form = document.createElement('form');
            form.setAttribute('method', 'get');
            form.setAttribute('action', action);
            document.charset = "utf-8";
            var hiddenField = document.createElement('input');
            hiddenField.setAttribute('type', 'hidden');
            form.appendChild(hiddenField);
            document
                .body
                .appendChild(form);
            form.submit();
        }
        $(".sweet").on('click', function () {
            $(".lostaric").animate({
                top: 660
            }, 1000);
            $(".terarosa").animate({
                top: 850
            }, 1000);
            $(".indonasia").animate({
                top: 480
            }, 1000);
        })
        $(".bodygam").on('click', function () {
            $(".lostaric").animate({
                top: 480
            }, 1000);
            $(".terarosa").animate({
                top: 660
            }, 1000);
            $(".indonasia").animate({
                top: 850
            }, 1000);
        })
        $(".sanme").on('click', function () {
            $(".lostaric").animate({
                top: 840
            }, 1000);
            $(".terarosa").animate({
                top: 480
            }, 1000);
            $(".indonasia").animate({
                top: 660
            }, 1000);
        })
        var timeT = document.getElementById("runningtime");/*window.onload = function()
{
cnt = 10;
//countdown();
}    function countdown()
{
if(cnt == 0)
{
    sendPost('/Order_Timeout');
}
else{
timeT.innerText = cnt;
setTimeout("countdown()", 1000);
cnt--;
}
}*/
        function orderform() {
            var json = {
                "Blender_1": losvalue.toString(),
                "Blender_2": teravalue.toString(),
                "Blender_3": indovalue.toString()
            };
            sendPost("/Menu_Select_Blending", json);
        }
        function sendPost(action, params) {
            var form = document.createElement('form');
            form.setAttribute('method', 'post');
            form.setAttribute('action', action);
            document.charset = "utf-8";
            for (var key in params) {
                var hiddenField = document.createElement('input');
                hiddenField.setAttribute('type', 'hidden');
                hiddenField.setAttribute('name', key);
                hiddenField.setAttribute('value', params[key]);
                form.appendChild(hiddenField);
            }
            document
                .body
                .appendChild(form);
            form.submit();
        }
    </script>
</body>
</html>